# PyDOOM pseudo-3D shooter

---

## Возможности движка.

1. Графика.
    - **Отрисовка 3D** с помощью ray casting технологии.
    - **Текстурирование** стен, скайбоксы.
    - *Статичные*, *интерактивные объекты*, *npc* (**спрайты**).
    - **Анимации** спрайтов.
2. Интеракция.
    - **Ходьба** на WASD, **выстрел** на ЛКМ.
    - **Взаимодействие с объектами**: убийство врагов,
      открытие дверей, взрыв бочек.
    - Возможность выбрать один из двух **уровней**.
3. Другой функционал.
    - **Мини-карта**
    - **Музыка** в меню, на уровне.
    - **Экран завершения** игры, подсчет очков, отображение
      последнего результата в меню.

---

### Правила Игры.

---
Для победы в игре, необходимо зачистить весь уровень от врагов.
Подсчет очков выполняется по формуле **5000 - количество циклов * 0.5**.
Тем самым количество очков зависит от скорости прохождения уровня.
---

## Используемые технологии и библиотеки.

1. ***Pygame***
    - Для рисования используется функционал библиотеки **Pygame**
2. ***Numba***
    - Библиотека компилирующая python-код в машинный перед запуском
      основной программы. Функционал данной библиотеки используется для
      ускорения ray casting функции с помощью декоратора **@njit**, который
      принимает явно типизированные данные. Это позволяет увеличить fps
      на **~30%**!
3. ***deque()*** *from* ***collections***
   - Позволяет крайне быстро переставлять первый и последний элементы
массива. Используется для анимаций.
---

## Структурные особенности проекта

1. Хранение данных о карте и объектах.
   - Карта представлена в виде **txt-файла** с матрицей размером
24 * 16 клеток.
   - Информация об объектах представлена в виде **csv-файла**.
В таблице хранится имя объекта и его положение на карте.
2. Файл **config**.
   - Содержит константы, прочие данные: положение игрока на карте,
его скорости движения и поворота.
3. Файл **rayCasting**.
   - Содержит функции расчета пересечения луча с препятствием,
масштабирования текстуры исходя из расчётов.
4. Файл **drawing**.
   - Содержит классы, занимающиеся отрисовкой. Класс **Drawing**
рисует мир: накладывает текстуры стен, неба.
   - Класс **MenuDrawing** отрисовывает меню. Отвечает за интеракции
с кнопками.
5. Файл **interactions**.
   - Класс **Interactions** отвечает за взаимодействие с миром,
музыку, проверку состояния игры.
6. Файл **map**.
   - Содержит класс **World_map** хранящий данные о карте.
7. Файл **player**.
   - Содержит класс **Player** игрока.
8. Файл **objects**.
   - Содержит класс **Sprites** хранящий положение ообъектов на карте
   - Класс **SpriteObject** спрайтов. Определяет их свойства: коэффициенты
масштабирования, анимации, их статус и т.д.
---

### Запуск игры exe-файлом
В папке **dist** находится файл **main.exe**.
### Запуск исходного кода
Загрузите зависимости в **PyCharm**.
```
pip install -r requirements.txt
```
